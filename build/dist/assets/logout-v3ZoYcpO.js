import{j as s,r as t}from"./index-C2_29CN7.js";function F({user:a}){return s.jsxs(s.Fragment,{children:[s.jsx("div",{id:"profile-nav-option",children:s.jsx("div",{className:"profile-img-layer",children:s.jsx("a",{href:`/dashboard/profile?id=${a.id}`,className:"nav-option",id:"profile-img",children:s.jsx("img",{className:"img-options",id:"profile-img-value",src:a.img,alt:"Profile"})})})}),s.jsx("div",{className:"message-layer",children:s.jsx("div",{className:"nav-icon-option",children:s.jsx("a",{href:"/dashboard/message",children:s.jsx("img",{className:"img-options",id:"message-img",src:"../assets/icons/nav/message.svg",alt:"Messages"})})})}),s.jsx("div",{className:"wallet-layer",children:s.jsx("div",{className:"nav-icon-option",children:s.jsx("a",{href:"/dashboard/wallet",children:s.jsx("img",{className:"img-options",id:"wallet-img",src:"../assets/icons/nav/wallet.svg",alt:"Wallet"})})})})]})}function $({state:a,toggleActive:c,user:i,handleLogout:l}){return s.jsx("div",{className:`list-option-layer ${a}`,children:s.jsxs("div",{className:"list-option-content",children:[s.jsx("div",{className:"exit-option",children:s.jsx("button",{onClick:c,className:"close-list-button",children:s.jsx("h3",{children:"Close"})})}),s.jsxs("article",{className:"list-options",children:[s.jsx("div",{className:"list-layer-div list-username",children:s.jsx("div",{className:"list-option-div",children:s.jsx("a",{href:i.username?"/dashboard/profile":"/login",children:s.jsxs("h2",{className:"text-value-list other-text",style:i.username?{}:{paddingLeft:"1rem",paddingRight:"1rem"},children:[" ",i.username?i.username:"Login"]})})})}),s.jsxs("div",{className:"first-line",children:[s.jsxs("div",{className:"left-div",children:[s.jsx("div",{className:"list-layer-div list-profile",children:s.jsx("div",{className:"list-option-div",children:s.jsx("a",{href:i.username?"/dashboard/profile":"/login",children:s.jsx("h4",{className:"text-value-list other-text",children:"Profile"})})})}),s.jsx("div",{className:"list-layer-div list-messages",children:s.jsx("div",{className:"list-option-div",children:s.jsx("a",{href:i.username?"/dashboard/message":"/login",children:s.jsx("h4",{className:"text-value-list other-text",children:"Messages"})})})}),s.jsx("div",{className:"list-layer-div list-products",children:s.jsx("div",{className:"list-option-div",children:s.jsx("a",{href:i.username?"/dashboard/products":"/login",children:s.jsx("h4",{className:"text-value-list other-text",children:"Product"})})})})]}),s.jsxs("div",{className:"right-div",children:[s.jsx("div",{className:"list-layer-div list-orders",children:s.jsx("div",{className:"list-option-div",children:s.jsx("a",{href:i.username?"/dashboard/order":"/login",children:s.jsx("h4",{className:"text-value-list other-text",children:"Orders"})})})}),s.jsx("div",{className:"list-layer-div list-feedback",children:s.jsx("div",{className:"list-option-div",children:s.jsx("a",{href:i.username?"/dashboard/feedback":"/login",children:s.jsx("h4",{className:"text-value-list other-text",children:"Feedback"})})})}),s.jsx("div",{className:"list-layer-div list-wallet",children:s.jsx("div",{className:"list-option-div",children:s.jsx("a",{href:i.username?"/dashboard/wallet":"/login",children:s.jsx("h4",{className:"text-value-list other-text",children:"Wallet"})})})})]})]}),s.jsxs("div",{className:"last-line",children:[s.jsx("div",{className:"list-layer-div list-settings",children:s.jsx("div",{className:"list-option-div",children:s.jsx("a",{href:i.username?"/dashboard/settings":"/login",children:s.jsx("h4",{className:"text-value-list other-text",id:"setting-button",children:"Settings"})})})}),s.jsx("div",{className:"list-layer-div list-exit-account",children:s.jsx("div",{className:"list-option-div exit-option-div",children:i.username?s.jsx("button",{id:"button-exit-nav",onClick:l,children:s.jsx("h4",{className:"text-value-list",id:"exit-account-option",children:"Exit Account"})}):s.jsx(s.Fragment,{})})})]})]})]})})}function T(){return s.jsx("div",{id:"profile-nav-option",children:s.jsx("div",{className:"nav-option",children:s.jsx("a",{href:"/login",id:"profile-redirect-login",children:"Login"})})})}function E({loggedIn:a,user:c,handlelogout:i}){const[l,r]=t.useState(""),[d,o]=t.useState(!1),[h,x]=t.useState(!1),[b,m]=t.useState([]),[v,_]=t.useState([]),[j,S]=t.useState([]),[u,w]=t.useState([]),p=()=>{r(""),x(!h)},A=async()=>{if(l){const g=await(await fetch(`/api/seller/get-product/top?product=${l}`)).json();m(g);const N=[],f=[],y=[];g.forEach(n=>{n.category==="Account"?N.push(n):n.category==="Service"?f.push(n):n.category==="Assets"&&y.push(n)}),_(N),S(f),w(y)}else m([])};t.useEffect(()=>{l&&x(!1)},[l]);const C=e=>{r(e.target.value),o(!0)};return t.useEffect(()=>{if(d){const e=setTimeout(()=>{A(),o(!1)},400);return()=>clearTimeout(e)}},[l,d]),s.jsxs("section",{className:"top-content",children:[s.jsx("nav",{className:"top-bar",children:s.jsxs("div",{className:"nav-container",children:[s.jsxs("div",{className:"nav-left",children:[s.jsx("div",{id:"home-redirect-button",children:s.jsx("a",{href:"/home",id:"home-redirect",children:s.jsx("h4",{id:"logo-nav-option",className:"nav-option",style:{color:"white"},children:"CS-Buy"})})}),s.jsx("div",{id:"account-nav-option",className:"nav-option",children:s.jsx("a",{style:{color:"white"},href:"...",children:"Accounts"})}),s.jsx("div",{id:"services-nav-option",className:"nav-option",children:s.jsx("a",{style:{color:"white"},href:"...",children:"Services"})}),s.jsx("div",{id:"services-nav-option",className:"nav-option",children:s.jsx("a",{style:{color:"white"},href:"...",children:"Assets"})}),s.jsx("div",{id:"open-options",children:s.jsx("button",{onClick:p,id:"options-nav-button",children:s.jsx("img",{src:"../assets/icons/menu.svg",alt:""})})})]}),s.jsx("div",{className:"nav-bar-container",children:s.jsxs("form",{className:"nav-search-bar",onSubmit:e=>e.preventDefault(),children:[s.jsx("input",{type:"text",value:l,onChange:C,placeholder:"Search...",alt:"Search input","aria-label":"Search products, services or assets"}),s.jsx("button",{type:"button",id:"search-icon",children:s.jsx("img",{src:"../assets/icons/search.svg",alt:"Search button"})})]})}),s.jsxs("div",{className:"nav-right",children:[s.jsx("div",{className:"nav-option",id:"help-nav-option",children:s.jsx("a",{style:{color:"white"},href:"/help",children:"Help"})}),a?s.jsx(F,{user:c}):s.jsx(T,{})]})]})}),l&&b.length>0&&s.jsx("div",{className:"search_results",children:s.jsxs("div",{className:"seact_result-layer",children:[s.jsx("div",{className:"text_title",children:"Accounts"}),s.jsx("ul",{className:"search_results-ul",children:v.length===0?s.jsx(s.Fragment,{children:s.jsx("div",{className:"notfound_product",children:" no accounts found!"})}):s.jsx(s.Fragment,{children:v.map(e=>s.jsx("a",{style:{display:"contents"},href:`/product?id=${e.product_id}`,children:s.jsxs("li",{className:"search-result-item",children:[s.jsx("div",{className:"img-layer",children:s.jsx("img",{src:e.image,alt:e.title,className:"result-image"})}),s.jsxs("div",{className:"result-info",children:[s.jsx("div",{className:"result_info-title",children:s.jsx("h5",{children:e.title})}),s.jsx("div",{className:"result_info-price",children:s.jsxs("p",{children:["$",e.price]})})]})]},e.product_id)}))})}),s.jsx("div",{className:"text_title",children:"Services"}),s.jsx("ul",{className:"search_results-ul",children:j.length===0?s.jsx(s.Fragment,{children:s.jsx("div",{className:"notfound_product",children:" no service found!"})}):s.jsx(s.Fragment,{children:j.map(e=>s.jsx("a",{style:{display:"contents"},href:`/product?id=${e.product_id}`,children:s.jsxs("li",{className:"search-result-item",children:[s.jsx("div",{className:"img-layer",children:s.jsx("img",{src:e.image,alt:e.title,className:"result-image"})}),s.jsxs("div",{className:"result-info",children:[s.jsx("div",{className:"result_info-title",children:s.jsx("h5",{children:e.title})}),s.jsx("div",{className:"result_info-price",children:s.jsxs("p",{children:["$",e.price]})})]})]},e.product_id)}))})}),s.jsx("div",{className:"text_title",children:"Assets"}),s.jsx("ul",{className:"search_results-ul",children:u.length===0?s.jsx(s.Fragment,{children:s.jsx("div",{className:"notfound_product",children:" no assets found!"})}):s.jsx(s.Fragment,{children:u.map(e=>s.jsx("a",{style:{display:"contents"},href:`/product?id=${e.product_id}`,children:s.jsxs("li",{className:"search-result-item",children:[s.jsx("div",{className:"img-layer",children:s.jsx("img",{src:e.image,alt:e.title,className:"result-image"})}),s.jsxs("div",{className:"result-info",children:[s.jsx("div",{className:"result_info-title",children:s.jsx("h5",{children:e.title})}),s.jsx("div",{className:"result_info-price",children:s.jsxs("p",{children:["$",e.price]})})]})]},e.product_id)}))})})]})}),s.jsx($,{handleLogout:i,user:c,state:h?"active":"",toggleActive:p})]})}async function L(){const a=await fetch("/api/auth/logout",{credentials:"include",method:"POST",headers:{"Cache-Control":"no-cache"}});a.ok?(await new Promise(c=>setTimeout(c,50)),window.location.href="/login"):console.error("Error:",await a.text())}export{E as T,L as h};
