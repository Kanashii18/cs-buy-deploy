import{j as e,r,u as f,H as g}from"./index-C2_29CN7.js";import{L as p}from"./main-BLwAbwHR.js";import{m}from"./proxy-LIqjFcTa.js";import{T as x,h as v}from"./logout-v3ZoYcpO.js";import{F as h}from"./foot-CJX0r3Dj.js";/* empty css             *//* empty css             */function y({product:s}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"title-product",children:e.jsx("div",{children:e.jsx("strong",{id:"title-product-focus",style:{fontFamily:"serif"},children:s.title})})}),e.jsx("div",{className:"img-div-product",children:e.jsx("img",{className:"img-product-container",src:s.image,alt:"product image"})})]})}function N({seller:s}){const[t,i]=r.useState([]),[d,a]=r.useState(!0),[c,n]=r.useState(null);return r.useEffect(()=>{async function l(){try{const o=await fetch("/api/seller/get-feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s.user_id})});if(!o.ok)throw new Error("Error al obtener feedbacks");const u=await o.json();console.log(u),i(u||[])}catch(o){n(o.message)}finally{a(!1)}}l()},[s]),d?e.jsx("p",{children:"Cargando comentarios..."}):c?e.jsxs("p",{children:["Error: ",c]}):e.jsx(e.Fragment,{children:t.length!==0?e.jsx(e.Fragment,{children:t.map((l,o)=>e.jsxs("article",{className:"list-comment-product",children:[e.jsxs("header",{className:"user-information",children:[e.jsx("img",{className:"img-user-commentary",src:l.user_img,alt:`Foto de ${l.user_username}`}),e.jsx("p",{className:"username",children:l.user_username})]}),e.jsx("section",{className:"user-commentary",children:e.jsx("p",{children:l.comment})})]},o))}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"feedback__message-content",style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{className:"feedback__message-alert",children:e.jsx("p",{children:"There's not comments..."})})})})})}function _({seller:s}){return e.jsx("div",{className:"comment-div",children:e.jsx(N,{seller:s})})}function b({product:s}){return e.jsx("div",{className:"description-product",children:e.jsx("div",{className:"text-div-product",children:s.description})})}function F({seller:s}){return e.jsx("div",{className:"seller-information",children:e.jsx("p",{children:s.description})})}function S({product:s,seller:t}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"second-div-content",children:[e.jsxs("div",{className:"seller-info-div",children:[e.jsx(b,{product:s}),e.jsx(F,{seller:t})]}),e.jsx(_,{seller:t})]})})}function C({seller:s}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-left-content",children:e.jsxs("a",{href:`/dashboard/profile?id=${s.user_id}`,style:{display:"contents"},children:[e.jsx("div",{className:"img-user-div",id:"seller-img-container",children:e.jsx("img",{src:s.img,alt:s.username})}),e.jsx("h3",{id:"seller-username",children:e.jsx("strong",{style:{color:"hsl(0, 0.00%, 80.00%)"},children:s.username})})]})}),e.jsxs("div",{className:"flex-right-content",children:[e.jsxs("h4",{id:"seller-ratio",children:[s.rate,"%"]}),e.jsx("img",{id:"star-icon",src:"../assets/icons/star.svg",alt:"star icon"})]})]})}function w({product:s}){return console.log(s),e.jsx(e.Fragment,{children:e.jsx("div",{className:"details-seller-container",children:e.jsxs("div",{className:"details-seller-content",content:"details-user",itemProp:"details",children:[e.jsx("div",{className:"delivery-time",children:e.jsx("h4",{children:e.jsxs("strong",{className:"detail-content-text",id:"delivery-time-text",style:{color:"white"},children:["Delivery Time :"," ",e.jsx("span",{className:"detail-content-text",style:{color:"yellow"},children:s.delivery_value>0?e.jsxs(e.Fragment,{children:[s.delivery_value,e.jsx("span",{style:{color:"yellow",marginLeft:".4rem"},className:"delivery_type-space",children:s.deliveryUnit})]}):e.jsx(e.Fragment,{children:s.deliveryUnit})})]})})}),e.jsx("div",{className:"Garantia-div",children:e.jsx("h4",{children:e.jsxs("strong",{className:"detail-content-text",id:"warranty-text",style:{color:"white"},children:["Warranty period :"," ",e.jsx("span",{style:{color:"yellow"},children:"10 Days"})]})})}),e.jsx("div",{className:"price-div",children:e.jsx("span",{})})]})})})}function k({product:s,seller:t}){f();const i=()=>{window.location.href=`/product/checkout?product_id=${s.product_id}`};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-product-flex",children:e.jsxs("div",{className:"container-info-product",children:[e.jsx("div",{className:"info-seller",id:"seller-buy-content",children:e.jsx(C,{seller:t})}),e.jsx("section",{className:"details-seller-info",children:e.jsx(w,{product:s})}),e.jsx("div",{className:"place-order",children:e.jsx("button",{onClick:i,id:"purchase-product-buttom",type:"submit",children:e.jsxs("span",{style:{color:"rgb(247, 247, 247)",fontSize:"1.34rem",fontFamily:"serif"},children:[" ",s.price,"$ | Buy"]})})})]})})})}const E={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15}}},j={hidden:{opacity:0,x:50},visible:{opacity:1,x:0}};function T(){const[s,t]=r.useState(null),[i,d]=r.useState(null);return r.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("id");fetch(`/api/seller/product__page?product_id=${a}`,{credentials:"include",method:"GET",headers:{"Cache-Control":"no-cache"}}).then(c=>c.json()).then(c=>{t(c),fetch("/api/auth/seller-check",{credentials:"include",method:"POST",headers:{"Cache-Control":"no-cache","Content-Type":"application/json"},body:JSON.stringify({user_id:c.user_id})}).then(n=>n.json()).then(n=>{console.log(n),d(n)})})},[]),!s||!i?e.jsx(p,{}):e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsxs("title",{children:[s.title," | Cyber Shop Buy"]}),e.jsx("link",{rel:"canonical",href:`https://cs-buy.com/product/${s.id}`})]}),e.jsxs(m.div,{className:"content",variants:E,initial:"hidden",animate:"visible",children:[e.jsxs(m.div,{className:"focus-container",variants:j,children:[e.jsx("div",{className:"product-info-container",children:e.jsx(y,{product:s})}),e.jsx("section",{className:"content-info-product",children:e.jsx(k,{product:s,seller:i})})]}),e.jsx(m.div,{className:"second_container",variants:j,children:e.jsx(S,{product:s,seller:i})})]})]})}function G(){const[s,t]=r.useState(!1),[i,d]=r.useState(!0),[a,c]=r.useState(!1);return r.useEffect(()=>{fetch("/api/auth/session-check",{credentials:"include",method:"GET"}).then(n=>n.json()).then(n=>{console.log("Respuesta sesión:",n),t(n.loggedIn),n.loggedIn&&c({username:n.username,img:n.img,role:n.role}),d(!1)}).catch(n=>console.error("Error de sesión:",n))},[]),i?e.jsxs(e.Fragment,{children:[e.jsx(x,{handlelogout:v,loggedIn:s,user:s?a:{}}),e.jsx(p,{}),e.jsx(h,{})?e.jsx(h,{}):e.jsx("div",{children:"Cargando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{loggedIn:s,user:s?a:{}}),e.jsx("main",{className:"main-content product-content",children:e.jsx(T,{})}),e.jsx(h,{})]})}export{G as default};
