import{g as Oe,R as d,r as b,j as o,u as Re}from"./index-C2_29CN7.js";import{T as z,h as X}from"./logout-v3ZoYcpO.js";import{F as B}from"./foot-CJX0r3Dj.js";import{m as V}from"./proxy-LIqjFcTa.js";import{L as Ae}from"./main-BLwAbwHR.js";/* empty css             *//* empty css             */var ue="basil",Ie=function(e){return e===3?"v3":e},de="https://js.stripe.com",Le="".concat(de,"/").concat(ue,"/stripe.js"),We=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Fe=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Ue=function(e){return We.test(e)||Fe.test(e)},Me=function(){for(var e=document.querySelectorAll('script[src^="'.concat(de,'"]')),t=0;t<e.length;t++){var n=e[t];if(Ue(n.src))return n}return null},Q=function(e){var t="",n=document.createElement("script");n.src="".concat(Le).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},Be=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.8.0",startTime:t})},N=null,I=null,L=null,Ve=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},De=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},qe=function(e){return N!==null?N:(N=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var a=Me();if(!(a&&e)){if(!a)a=Q(e);else if(a&&L!==null&&I!==null){var i;a.removeEventListener("load",L),a.removeEventListener("error",I),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=Q(e)}}L=De(t,n),I=Ve(n),a.addEventListener("load",L),a.addEventListener("error",I)}catch(l){n(l);return}}),N.catch(function(t){return N=null,Promise.reject(t)}))},$e=function(e,t,n){if(e===null)return null;var a=t[0],i=a.match(/^pk_test/),l=Ie(e.version),p=ue;i&&l!==p&&console.warn("Stripe.js@".concat(l," was loaded on the page, but @stripe/stripe-js@").concat("7.8.0"," expected Stripe.js@").concat(p,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var s=e.apply(void 0,t);return Be(s,n),s},T,pe=!1,fe=function(){return T||(T=qe(null).catch(function(e){return T=null,Promise.reject(e)}),T)};Promise.resolve().then(function(){return fe()}).catch(function(r){pe||console.warn(r)});var Je=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];pe=!0;var a=Date.now();return fe().then(function(i){return $e(i,t,a)})},D={exports:{}},q,ee;function He(){if(ee)return q;ee=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return q=r,q}var $,te;function Ye(){if(te)return $;te=1;var r=He();function e(){}function t(){}return t.resetWarningCache=e,$=function(){function n(l,p,s,y,u,g){if(g!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},$}var re;function Ge(){return re||(re=1,D.exports=Ye()()),D.exports}var Ke=Ge();const f=Oe(Ke);function ne(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function oe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ne(Object(t),!0).forEach(function(n){me(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function W(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?W=function(e){return typeof e}:W=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(r)}function me(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ze(r,e){if(r==null)return{};var t={},n=Object.keys(r),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function ze(r,e){if(r==null)return{};var t=Ze(r,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function he(r,e){return Xe(r)||Qe(r,e)||et(r,e)||tt()}function Xe(r){if(Array.isArray(r))return r}function Qe(r,e){var t=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(t!=null){var n=[],a=!0,i=!1,l,p;try{for(t=t.call(r);!(a=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));a=!0);}catch(s){i=!0,p=s}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw p}}return n}}function et(r,e){if(r){if(typeof r=="string")return ae(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ae(r,e)}}function ae(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function tt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j=function(e,t,n){var a=!!n,i=d.useRef(n);d.useEffect(function(){i.current=n},[n]),d.useEffect(function(){if(!a||!e)return function(){};var l=function(){i.current&&i.current.apply(i,arguments)};return e.on(t,l),function(){e.off(t,l)}},[a,t,e,i])},J=function(e){var t=d.useRef(e);return d.useEffect(function(){t.current=e},[e]),t.current},P=function(e){return e!==null&&W(e)==="object"},rt=function(e){return P(e)&&typeof e.then=="function"},nt=function(e){return P(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},ie="[object Object]",ot=function r(e,t){if(!P(e)||!P(t))return e===t;var n=Array.isArray(e),a=Array.isArray(t);if(n!==a)return!1;var i=Object.prototype.toString.call(e)===ie,l=Object.prototype.toString.call(t)===ie;if(i!==l)return!1;if(!i&&!n)return e===t;var p=Object.keys(e),s=Object.keys(t);if(p.length!==s.length)return!1;for(var y={},u=0;u<p.length;u+=1)y[p[u]]=!0;for(var g=0;g<s.length;g+=1)y[s[g]]=!0;var c=Object.keys(y);if(c.length!==p.length)return!1;var C=e,k=t,w=function(O){return r(C[O],k[O])};return c.every(w)},ve=function(e,t,n){return P(e)?Object.keys(e).reduce(function(a,i){var l=!P(t)||!ot(e[i],t[i]);return n.includes(i)?(l&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),a):l?oe(oe({},a||{}),{},me({},i,e[i])):a},null):null},ye="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",se=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ye;if(e===null||nt(e))return e;throw new Error(t)},at=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ye;if(rt(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(a){return se(a,t)})};var n=se(e,t);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},it=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.9.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.9.0",url:"https://stripe.com/docs/stripe-js/react"}))},F=d.createContext(null);F.displayName="ElementsContext";var ge=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},xe=function(e){var t=e.stripe,n=e.options,a=e.children,i=d.useMemo(function(){return at(t)},[t]),l=d.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(n):null}}),p=he(l,2),s=p[0],y=p[1];d.useEffect(function(){var c=!0,C=function(w){y(function(_){return _.stripe?_:{stripe:w,elements:w.elements(n)}})};return i.tag==="async"&&!s.stripe?i.stripePromise.then(function(k){k&&c&&C(k)}):i.tag==="sync"&&!s.stripe&&C(i.stripe),function(){c=!1}},[i,s,n]);var u=J(t);d.useEffect(function(){u!==null&&u!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,t]);var g=J(n);return d.useEffect(function(){if(s.elements){var c=ve(n,g,["clientSecret","fonts"]);c&&s.elements.update(c)}},[n,g,s.elements]),d.useEffect(function(){it(s.stripe)},[s.stripe]),d.createElement(F.Provider,{value:s},a)};xe.propTypes={stripe:f.any,options:f.object};var st=function(e){var t=d.useContext(F);return ge(t,e)},ct=function(){var e=st("calls useElements()"),t=e.elements;return t};f.func.isRequired;var je=d.createContext(null);je.displayName="CheckoutSdkContext";var lt=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},ut=d.createContext(null);ut.displayName="CheckoutContext";f.any,f.shape({fetchClientSecret:f.func.isRequired,elementsOptions:f.object}).isRequired;var H=function(e){var t=d.useContext(je),n=d.useContext(F);if(t&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?lt(t,e):ge(n,e)},dt=["mode"],pt=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},m=function(e,t){var n="".concat(pt(e),"Element"),a=function(s){var y=s.id,u=s.className,g=s.options,c=g===void 0?{}:g,C=s.onBlur,k=s.onFocus,w=s.onReady,_=s.onChange,O=s.onEscape,be=s.onClick,Ce=s.onLoadError,Se=s.onLoaderStart,Ee=s.onNetworksChange,we=s.onConfirm,ke=s.onCancel,Pe=s.onShippingAddressChange,_e=s.onShippingRateChange,R=H("mounts <".concat(n,">")),A="elements"in R?R.elements:null,S="checkoutSdk"in R?R.checkoutSdk:null,Ne=d.useState(null),Y=he(Ne,2),x=Y[0],Te=Y[1],E=d.useRef(null),U=d.useRef(null);j(x,"blur",C),j(x,"focus",k),j(x,"escape",O),j(x,"click",be),j(x,"loaderror",Ce),j(x,"loaderstart",Se),j(x,"networkschange",Ee),j(x,"confirm",we),j(x,"cancel",ke),j(x,"shippingaddresschange",Pe),j(x,"shippingratechange",_e),j(x,"change",_);var M;w&&(e==="expressCheckout"?M=w:M=function(){w(x)}),j(x,"ready",M),d.useLayoutEffect(function(){if(E.current===null&&U.current!==null&&(A||S)){var v=null;if(S)switch(e){case"payment":v=S.createPaymentElement(c);break;case"address":if("mode"in c){var K=c.mode,Z=ze(c,dt);if(K==="shipping")v=S.createShippingAddressElement(Z);else if(K==="billing")v=S.createBillingAddressElement(Z);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":v=S.createExpressCheckoutElement(c);break;case"currencySelector":v=S.createCurrencySelectorElement();break;case"taxId":v=S.createTaxIdElement(c);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else A&&(v=A.create(e,c));E.current=v,Te(v),v&&v.mount(U.current)}},[A,S,c]);var G=J(c);return d.useEffect(function(){if(E.current){var v=ve(c,G,["paymentRequest"]);v&&"update"in E.current&&E.current.update(v)}},[c,G]),d.useLayoutEffect(function(){return function(){if(E.current&&typeof E.current.destroy=="function")try{E.current.destroy(),E.current=null}catch{}}},[]),d.createElement("div",{id:y,className:u,ref:U})},i=function(s){H("mounts <".concat(n,">"));var y=s.id,u=s.className;return d.createElement("div",{id:y,className:u})},l=t?i:a;return l.propTypes={id:f.string,className:f.string,onChange:f.func,onBlur:f.func,onFocus:f.func,onReady:f.func,onEscape:f.func,onClick:f.func,onLoadError:f.func,onLoaderStart:f.func,onNetworksChange:f.func,onConfirm:f.func,onCancel:f.func,onShippingAddressChange:f.func,onShippingRateChange:f.func,options:f.object},l.displayName=n,l.__elementType=e,l},h=typeof window>"u",ft=d.createContext(null);ft.displayName="EmbeddedCheckoutProviderContext";var mt=function(){var e=H("calls useStripe()"),t=e.stripe;return t};m("auBankAccount",h);var ce=m("card",h);m("cardNumber",h);m("cardExpiry",h);m("cardCvc",h);m("fpxBank",h);m("iban",h);m("idealBank",h);m("p24Bank",h);m("epsBank",h);m("payment",h);m("expressCheckout",h);m("currencySelector",h);m("paymentRequestButton",h);m("linkAuthentication",h);m("address",h);m("shippingAddress",h);m("paymentMethodMessaging",h);m("affirmMessage",h);m("afterpayClearpayMessage",h);m("taxId",h);function ht(){const r=mt(),e=ct(),[t,n]=b.useState(!1),a={base:{color:"#ffffffde",fontFamily:"Arial, sans-serif",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},i=async l=>{if(l.preventDefault(),!r||!e)return;n(!0);const p=e.getElement(ce),{error:s,paymentMethod:y}=await r.createPaymentMethod({type:"card",card:p});if(s)console.error(s),n(!1),alert("Error al procesar el pago");else{const{id:u}=y,c=await(await fetch("/api/verify/checkout/stripe/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_method:u,amount:1e3})})).json(),C=await r.confirmCardPayment(c.client_secret);C.error?(console.error(C.error.message),alert("Pago fallido")):alert("Pago exitoso"),n(!1)}};return o.jsx("form",{onSubmit:i,children:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx("div",{className:"flex flex-col",children:o.jsx("div",{className:"flex w-full flex-col gap-2.5",children:o.jsx("input",{type:"text",placeholder:"Nombre del titular de la tarjeta",className:"w-full rounded-xl border border-[#49545D] bg-[#181919] px-10 py-4 text-sm font-medium uppercase text-[#D6E4EF] outline-0 placeholder:font-medium placeholder:text-[#D6E4EF] focus:outline-none",name:"cardHolder"})})}),o.jsx("div",{className:"stripe-card rounded-xl bg-[#181919] StripeElement StripeElement--empty",children:o.jsx(ce,{options:{style:a},className:"__PrivateStripeElement"})}),o.jsx("div",{className:"flex w-full items-center gap-2 product__div-submit summit__buy-button",children:o.jsx("button",{id:"click_stripe_credit_card",type:"submit",className:"product__button-submit w-full uppercase tablet:w-fit text-center transition-all duration-200 hover:shadow-xl font-bold text-sm rounded-xl py-2.5 px-2.5 mobile:px-10 cursor-pointer hover:bg-opacity-90 !w-full rounded-xl bg-green-300 py-4 text-center text-black mobile:px-10",children:o.jsx("div",{className:"product__button-layer",children:o.jsx("span",{className:"pointer-events-none font-bold uppercase",children:"Buy"})})})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{children:o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M3.11111 0C1.393 0 0 1.393 0 3.11112V10.8889C0 12.607 1.393 14 3.11111 14H10.8889C12.607 14 14 12.607 14 10.8889V3.11112C14 1.393 12.607 0 10.8889 0H3.11111ZM7 3.11112C7.42933 3.11112 7.77778 3.45957 7.77778 3.8889C7.77778 4.31824 7.42933 4.66668 7 4.66668C6.57067 4.66668 6.22222 4.31824 6.22222 3.8889C6.22222 3.45957 6.57067 3.11112 7 3.11112ZM7 5.44446C7.42933 5.44446 7.77778 5.79291 7.77778 6.22224V10.1111C7.77778 10.5405 7.42933 10.8889 7 10.8889C6.57067 10.8889 6.22222 10.5405 6.22222 10.1111V6.22224C6.22222 5.79291 6.57067 5.44446 7 5.44446Z",fill:"#53535F"})})}),o.jsxs("p",{className:"text-left text-sm font-medium leading-[140%] text-[#97979B]",children:["Al enviar este formulario, aceptas nuestros",o.jsx("a",{className:"text-[#e0e0e0] underline",href:"/es/terms/terms_of_use",children:"términos de uso"})]})]})]})})}const vt=Je("pk_test_51RuTndBZL3uHJlLtnFRg17FDRgk0umD0C8ZxaWPNeR8IitM2GynHSmI9fV8moPMkJCb7550VqYByEnhirlVf2THI00vnkxCN6O");function yt(){const[r,e]=b.useState(null),t=()=>{window.history.back(),setTimeout(()=>{window.location.reload()},100)};b.useEffect(()=>{const i=document.createElement("script");return i.src="https://www.paypal.com/sdk/js?client-id=AXyj2EyPs3TWtT8pmro77pkOo-xL82tKHe_-GhDtvPQ9zoCwHZt8J1ypYwstKFlwDLZbRSMruAjV8jNs&components=buttons",i.async=!0,document.body.appendChild(i),i.onload=()=>{window.paypal.Buttons({createOrder:(l,p)=>fetch("/api/verify/checkout/paypal/pay",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:"10.00"})}).then(s=>s.json()).then(s=>s.approval_url),onApprove:(l,p)=>p.order.capture().then(function(s){alert("Transaction completed by "+s.payer.name.given_name)})}).render("#paypal-button-container")},()=>{document.body.removeChild(i)}},[]);const n=async()=>{const l=await(await fetch("/api/verify/checkout/crypto_payment/pay",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:10})})).json();l.status==="success"?(alert("Crypto payment created successfully"),window.location.href=l.payment_url):alert("Error creating crypto payment")},a=i=>{e(r===i?null:i)};return o.jsx("div",{className:"payment-methods-content",children:o.jsxs("div",{className:"payment-method-layer",children:[o.jsx("div",{className:"payment__option-div",children:o.jsx("button",{onClick:t,className:"payment__button-exit",children:o.jsx("img",{src:"../assets/icons/options/back-arrow.svg",alt:"back button"})})}),o.jsxs("div",{className:"payment-method-list",children:[o.jsx("div",{className:"method-text",children:o.jsx("h4",{children:"Payment Method"})}),o.jsx("div",{className:"payment-method-value",onClick:()=>a("credit-card"),children:o.jsx("h4",{children:"Credit Card"})}),o.jsx("div",{className:`payment-method-details ${r==="credit-card"?"visible":""}`,children:o.jsx(xe,{stripe:vt,children:o.jsx(ht,{})})}),o.jsx("div",{className:"payment-method-value",onClick:()=>a("paypal"),children:o.jsx("h4",{children:"Paypal"})}),o.jsxs("div",{className:`payment-method-details ${r==="paypal"?"visible":""}`,children:[o.jsx("div",{id:"paypal-button-container"})," "]}),o.jsx("div",{className:"payment-method-value",onClick:()=>a("crypto"),children:o.jsx("h4",{children:"Cryptocurrency"})}),o.jsx("div",{className:`payment-method-details ${r==="crypto"?"visible":""}`,children:o.jsx("button",{onClick:n,children:"Pay with Crypto"})})]})]})})}function gt({product:r}){console.log(r.product.title);const[e,t]=b.useState(!1);Re();const n=async()=>{t(!0);try{if(!(await fetch("/api/verify/checkout/order/complete",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},body:JSON.stringify({token:r.token}),credentials:"include"})).ok)throw new Error("Error creating order");window.location.assign("/dashboard/order")}catch(a){console.error("Error during the buy process:",a),alert("There was an error creating the order. Please try again.")}finally{t(!1)}};return o.jsxs("div",{className:"right-div__layer",children:[o.jsx("div",{className:"product-info-div",children:o.jsxs("div",{className:"product-info-content",children:[o.jsx("div",{className:"product-info-title",children:o.jsx("p",{children:r.product.title})}),o.jsxs("div",{className:"product-details-info-",children:[o.jsx("h5",{children:"1 day"}),o.jsx("h5",{children:"10 min"})]})]})}),o.jsxs("div",{className:"price-img-div",children:[o.jsx("div",{className:"product__div-cost",children:o.jsxs("div",{className:"price__div-content",children:[o.jsxs("div",{className:"price__div-layer",children:[o.jsxs("div",{className:"price__div-order",children:[o.jsx("h4",{children:"Order Price:"}),o.jsx("h4",{children:r.product.price})]}),o.jsxs("div",{className:"price__div-order",children:[o.jsx("h4",{children:"Payment Fee:"}),o.jsx("h4",{children:"13$"})]})]}),o.jsxs("div",{className:"price__div-order price__div-total",children:[o.jsx("h3",{children:"Total:"}),o.jsx("h3",{children:"13$"})]})]})}),o.jsx("div",{className:"product__div-second",children:o.jsx("div",{className:"product-img",children:o.jsx("img",{src:r.product.image,alt:"product image",srcset:""})})})]}),o.jsx("div",{className:"product__div-submit",children:o.jsx("button",{className:"product__button-submit",onClick:n,disabled:e,children:o.jsx("div",{className:"product__button-layer",children:o.jsx("h4",{children:"Buy"})})})})]})}const xt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15}}},le={hidden:{opacity:0,x:50},visible:{opacity:1,x:0}};function jt({product:r}){return console.log(`n2 

`,r[0]),o.jsx(o.Fragment,{children:o.jsxs(V.main,{className:"main-content",variants:xt,initial:"hidden",animate:"visible",children:[o.jsx(V.section,{className:"payment-methods",variants:le,children:o.jsx(yt,{})}),o.jsx(V.section,{className:"right-div-section",variants:le,children:o.jsx(gt,{product:r[0]})})]})})}function _t(){const[r,e]=b.useState(!1),[t,n]=b.useState(!1),[a,i]=b.useState(null),[l,p]=b.useState(!0),[s,y]=b.useState(null);return b.useEffect(()=>{fetch("/api/auth/session-check",{credentials:"include",method:"GET",headers:{"Cache-Control":"no-cache"}}).then(u=>u.json()).then(u=>{if(console.log("Respuesta sesión:",u),e(u.loggedIn),u.loggedIn===!1)return window.location.href="/login";u.loggedIn&&n({id:u.id,username:u.username,img:u.img,role:u.role})}).catch(u=>console.error("Error de sesión:",u))},[]),b.useEffect(()=>{const g=new URLSearchParams(window.location.search).get("product_id");if(!g){window.location.replace("/home");return}p(!0),y(null),fetch(`/api/verify/checkout/token?product_id=${encodeURIComponent(g)}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then(c=>{if(!c.ok)throw new Error(c.statusText);return c.json()}).then(c=>i(c)).catch(c=>y(c.message)).finally(()=>p(!1))},[]),l?o.jsxs(o.Fragment,{children:[o.jsx(z,{handlelogout:X,loggedIn:r,user:r?t:{}}),o.jsx(Ae,{}),o.jsx(B,{})?o.jsx(B,{}):o.jsx("div",{children:"Cargando..."})]}):s?o.jsxs("p",{children:["Error: ",s]}):o.jsxs(o.Fragment,{children:[o.jsx(z,{handlelogout:X,loggedIn:r,user:r?t:{}}),o.jsx(jt,{product:a}),o.jsx(B,{})]})}export{_t as default};
