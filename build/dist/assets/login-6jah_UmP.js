import{r as t,j as e,u}from"./index-C2_29CN7.js";import{L as h}from"./main-BLwAbwHR.js";import{I as g,E as x,P as p,G as f}from"./foot-LSZJfx4a.js";import{F as j}from"./foot-CJX0r3Dj.js";/* empty css             */function v(){const[n,i]=t.useState(null),[o,s]=t.useState(""),[c,l]=t.useState(""),d=async a=>{a.preventDefault();try{const r=await fetch("/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,password:o})}),m=await r.json();r.ok?window.location.href="/home":i(`${m.message}`)}catch{i("Error Desconocido, Porfavor Reintentar")}};return e.jsx("form",{className:"form-container-crendential",onSubmit:d,children:e.jsxs("div",{className:"log-in-div",children:[n&&e.jsx(g,{error:n,display:"block"}),e.jsx(x,{id:"login-email",text:"Username / Email",value:c,onChange:a=>l(a.target.value)}),e.jsx(p,{id:"login-password",text:"Password",value:o,onChange:a=>s(a.target.value)}),e.jsx("div",{className:"summit-session",children:e.jsx("div",{className:"send-credentials-form",action:"./home.html",children:e.jsx("button",{id:"summit-session",type:"submit",children:e.jsx("div",{className:"summit-class",id:"signin-button",children:"Sign In"})})})}),e.jsx("div",{className:"summit-session",children:e.jsx("div",{className:"options-div",children:e.jsxs("p",{id:"text-options",children:["Aun no estas registrado?",e.jsx("span",{children:e.jsx("a",{href:"/register",children:" Registrate aqui!"})})]})})})]})})}function I(){const[n,i]=t.useState(null),o=u();return t.useEffect(()=>{fetch("/api/auth/session-check",{credentials:"include",method:"GET",headers:{"Cache-Control":"no-cache"}}).then(s=>s.json()).then(s=>{console.log("Respuesta sesión:",s),i(s.loggedIn)}).catch(s=>console.error("Error de sesión:",s))},[]),t.useEffect(()=>{n===!0&&o("/home")},[n,o]),n===null?e.jsx(h,{}):e.jsx(e.Fragment,{children:e.jsx(f,{children:e.jsxs("main",{className:"main-content",children:[e.jsx(v,{}),e.jsx(j,{className:"main-footer"})]})})})}export{I as default};
